{"ast":null,"code":"import _slicedToArray from\"/Users/adavila/Documents/work/occam/dev/postgres_python/react-crud/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import Option from\"../Option\";import comments from\"../../services/comments\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdateData=function UpdateData(_ref){var library=_ref.library;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),owner=_useState4[0],setOwner=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),important=_useState10[0],setImportant=_useState10[1];useEffect(function(){var tempId;// Get all notes to display ids in dropdown\ncomments.getAll(library).then(function(response){setData(response);if(response.length>0){tempId=response[0].id;setId(response[0].id);// Add value to input fields\nsetOwner(response[0].owner);setContent(response[0].content);setImportant(response[0].important==='t'?true:false);}}).catch(function(error){console.log(\"So you thought\",error);});},[]);var updateData=function updateData(event){event.preventDefault();if(owner.length<1){alert('No name has been provided!');return null;}if(content.length<1){alert('Are you sure you want to send an empty note?');return null;}var newComment={owner:owner,content:content,important:important};comments.updateComment(id,newComment,library).then(function(response){// Do something\nalert(\"Updated item \".concat(id,\"!\"));// Update list of items\n});};var handleOwner=function handleOwner(event){setOwner(event.target.value);};var handleContent=function handleContent(event){setContent(event.target.value);};var handleImportant=function handleImportant(event){setImportant(!important);};var handleIdSelect=function handleIdSelect(event){setId(event.target.value);var selected=data.filter(function(element){return element.id===event.target.value;}).map(function(filteredElement){return filteredElement;});// Add value to input fields\nsetOwner(selected[0].owner);setContent(selected[0].content);setImportant(selected[0].important==='t'?true:false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"select\",{onChange:handleIdSelect,value:id,children:data.map(function(element){return/*#__PURE__*/_jsx(Option,{data:element},element.id);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:updateData,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{value:owner,onChange:handleOwner}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Content:\"}),/*#__PURE__*/_jsx(\"input\",{value:content,onChange:handleContent}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Important\",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"Important\",checked:important===true,onClick:handleImportant,onChange:function onChange(){}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update\"})]})]});};export default UpdateData;","map":{"version":3,"names":["useEffect","useState","Option","comments","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateData","_ref","library","_useState","_useState2","_slicedToArray","id","setId","_useState3","_useState4","owner","setOwner","_useState5","_useState6","content","setContent","_useState7","_useState8","data","setData","_useState9","_useState10","important","setImportant","tempId","getAll","then","response","length","catch","error","console","log","updateData","event","preventDefault","alert","newComment","updateComment","concat","handleOwner","target","value","handleContent","handleImportant","handleIdSelect","selected","filter","element","map","filteredElement","children","onChange","onSubmit","type","checked","onClick"],"sources":["/Users/adavila/Documents/work/occam/dev/postgres_python/react-crud/src/components/manipulators/UpdateData.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Option from \"../Option\";\nimport comments from \"../../services/comments\";\n\n\nconst UpdateData = ({library} : any) => {\n    const [id, setId] = useState('');\n    const [owner, setOwner] = useState('');\n    const [content, setContent] = useState('');\n    const [data, setData] = useState<any[]>([])\n    const [important, setImportant] = useState(false);\n\n    useEffect(() => {\n        let tempId:string;\n        // Get all notes to display ids in dropdown\n        comments\n            .getAll(library)\n            .then(response => {\n                setData(response)\n                if (response.length > 0) {\n                    tempId = response[0].id\n                    setId(response[0].id)\n                    // Add value to input fields\n                    setOwner(response[0].owner)\n                    setContent(response[0].content)\n                    setImportant(response[0].important === 't' ? true : false)\n                } \n            })\n            .catch(error => {\n                console.log(\"So you thought\", error)\n            })\n\n    }, [])\n\n    const updateData = (event : any) => {\n        event.preventDefault()\n\n        if (owner.length < 1) {\n            alert('No name has been provided!')\n            return null\n        }\n        if (content.length < 1) {\n            alert('Are you sure you want to send an empty note?')\n            return null\n        }\n        const newComment = {\n            owner: owner,\n            content: content,\n            important: important\n        }\n\n        comments\n            .updateComment(id, newComment, library)\n            .then(response => {\n                // Do something\n                alert(`Updated item ${id}!`)\n                // Update list of items\n            })\n    }\n\n    const handleOwner = (event : any) => {\n        setOwner(event.target.value)\n    }\n    const handleContent = (event : any) => {\n        setContent(event.target.value)\n    }\n    const handleImportant = (event : any) => {\n        setImportant(!important)\n    }\n    const handleIdSelect = (event : any) => {\n        setId(event.target.value)\n        const selected = data.filter((element : any) => element.id === event.target.value).map((filteredElement) => filteredElement)\n\n        // Add value to input fields\n        setOwner(selected[0].owner)\n        setContent(selected[0].content)\n        setImportant(selected[0].important === 't' ? true : false)\n    }\n    \n    return (\n        <>\n            <select onChange={handleIdSelect} value={id}>\n                {data.map(element => {\n                    return <Option key={element.id} data={element} />\n                })}\n            </select>\n            <form onSubmit={updateData}>\n                <p>Name</p>\n                <input\n                    value={owner}\n                    onChange={handleOwner}\n                />\n                <br />\n                <p>Content:</p>\n                <input\n                    value={content}\n                    onChange={handleContent}\n                />\n                <br />\n                <br />\n                Important\n                <input\n                    type=\"radio\"\n                    value={\"Important\"}\n                    checked={important === true}\n                    onClick={handleImportant}\n                    onChange={() => {}}\n                />\n                <button type=\"submit\">Update</button>\n            </form>\n        </>\n    )\n}\n\nexport default UpdateData;"],"mappings":"wJAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,MAAM,KAAM,WAAW,CAC9B,MAAO,CAAAC,QAAQ,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAG/C,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAAC,IAAA,CAAwB,IAAnB,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CACxB,IAAAC,SAAA,CAAoBZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzBG,EAAE,CAAAF,UAAA,IAAEG,KAAK,CAAAH,UAAA,IAChB,IAAAI,UAAA,CAA0BjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAA8BrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAAwBzB,QAAQ,CAAQ,EAAE,CAAC,CAAA0B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAApCE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAAkC7B,QAAQ,CAAC,KAAK,CAAC,CAAA8B,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAA1CE,SAAS,CAAAD,WAAA,IAAEE,YAAY,CAAAF,WAAA,IAE9B/B,SAAS,CAAC,UAAM,CACZ,GAAI,CAAAkC,MAAa,CACjB;AACA/B,QAAQ,CACHgC,MAAM,CAACvB,OAAO,CAAC,CACfwB,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACdR,OAAO,CAACQ,QAAQ,CAAC,CACjB,GAAIA,QAAQ,CAACC,MAAM,CAAG,CAAC,CAAE,CACrBJ,MAAM,CAAGG,QAAQ,CAAC,CAAC,CAAC,CAACrB,EAAE,CACvBC,KAAK,CAACoB,QAAQ,CAAC,CAAC,CAAC,CAACrB,EAAE,CAAC,CACrB;AACAK,QAAQ,CAACgB,QAAQ,CAAC,CAAC,CAAC,CAACjB,KAAK,CAAC,CAC3BK,UAAU,CAACY,QAAQ,CAAC,CAAC,CAAC,CAACb,OAAO,CAAC,CAC/BS,YAAY,CAACI,QAAQ,CAAC,CAAC,CAAC,CAACL,SAAS,GAAK,GAAG,CAAG,IAAI,CAAG,KAAK,CAAC,CAC9D,CACJ,CAAC,CAAC,CACDO,KAAK,CAAC,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,KAAK,CAAC,CACxC,CAAC,CAAC,CAEV,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAG,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,KAAW,CAAK,CAChCA,KAAK,CAACC,cAAc,CAAC,CAAC,CAEtB,GAAIzB,KAAK,CAACkB,MAAM,CAAG,CAAC,CAAE,CAClBQ,KAAK,CAAC,4BAA4B,CAAC,CACnC,MAAO,KAAI,CACf,CACA,GAAItB,OAAO,CAACc,MAAM,CAAG,CAAC,CAAE,CACpBQ,KAAK,CAAC,8CAA8C,CAAC,CACrD,MAAO,KAAI,CACf,CACA,GAAM,CAAAC,UAAU,CAAG,CACf3B,KAAK,CAAEA,KAAK,CACZI,OAAO,CAAEA,OAAO,CAChBQ,SAAS,CAAEA,SACf,CAAC,CAED7B,QAAQ,CACH6C,aAAa,CAAChC,EAAE,CAAE+B,UAAU,CAAEnC,OAAO,CAAC,CACtCwB,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd;AACAS,KAAK,iBAAAG,MAAA,CAAiBjC,EAAE,KAAG,CAAC,CAC5B;AACJ,CAAC,CAAC,CACV,CAAC,CAED,GAAM,CAAAkC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIN,KAAW,CAAK,CACjCvB,QAAQ,CAACuB,KAAK,CAACO,MAAM,CAACC,KAAK,CAAC,CAChC,CAAC,CACD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIT,KAAW,CAAK,CACnCnB,UAAU,CAACmB,KAAK,CAACO,MAAM,CAACC,KAAK,CAAC,CAClC,CAAC,CACD,GAAM,CAAAE,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIV,KAAW,CAAK,CACrCX,YAAY,CAAC,CAACD,SAAS,CAAC,CAC5B,CAAC,CACD,GAAM,CAAAuB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIX,KAAW,CAAK,CACpC3B,KAAK,CAAC2B,KAAK,CAACO,MAAM,CAACC,KAAK,CAAC,CACzB,GAAM,CAAAI,QAAQ,CAAG5B,IAAI,CAAC6B,MAAM,CAAC,SAACC,OAAa,QAAK,CAAAA,OAAO,CAAC1C,EAAE,GAAK4B,KAAK,CAACO,MAAM,CAACC,KAAK,GAAC,CAACO,GAAG,CAAC,SAACC,eAAe,QAAK,CAAAA,eAAe,GAAC,CAE5H;AACAvC,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC,CAACpC,KAAK,CAAC,CAC3BK,UAAU,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAAChC,OAAO,CAAC,CAC/BS,YAAY,CAACuB,QAAQ,CAAC,CAAC,CAAC,CAACxB,SAAS,GAAK,GAAG,CAAG,IAAI,CAAG,KAAK,CAAC,CAC9D,CAAC,CAED,mBACIzB,KAAA,CAAAE,SAAA,EAAAoD,QAAA,eACIxD,IAAA,WAAQyD,QAAQ,CAAEP,cAAe,CAACH,KAAK,CAAEpC,EAAG,CAAA6C,QAAA,CACvCjC,IAAI,CAAC+B,GAAG,CAAC,SAAAD,OAAO,CAAI,CACjB,mBAAOrD,IAAA,CAACH,MAAM,EAAkB0B,IAAI,CAAE8B,OAAQ,EAA1BA,OAAO,CAAC1C,EAAoB,CAAC,CACrD,CAAC,CAAC,CACE,CAAC,cACTT,KAAA,SAAMwD,QAAQ,CAAEpB,UAAW,CAAAkB,QAAA,eACvBxD,IAAA,MAAAwD,QAAA,CAAG,MAAI,CAAG,CAAC,cACXxD,IAAA,UACI+C,KAAK,CAAEhC,KAAM,CACb0C,QAAQ,CAAEZ,WAAY,CACzB,CAAC,cACF7C,IAAA,QAAK,CAAC,cACNA,IAAA,MAAAwD,QAAA,CAAG,UAAQ,CAAG,CAAC,cACfxD,IAAA,UACI+C,KAAK,CAAE5B,OAAQ,CACfsC,QAAQ,CAAET,aAAc,CAC3B,CAAC,cACFhD,IAAA,QAAK,CAAC,cACNA,IAAA,QAAK,CAAC,YAEN,cAAAA,IAAA,UACI2D,IAAI,CAAC,OAAO,CACZZ,KAAK,CAAE,WAAY,CACnBa,OAAO,CAAEjC,SAAS,GAAK,IAAK,CAC5BkC,OAAO,CAAEZ,eAAgB,CACzBQ,QAAQ,CAAE,SAAAA,SAAA,CAAM,CAAC,CAAE,CACtB,CAAC,cACFzD,IAAA,WAAQ2D,IAAI,CAAC,QAAQ,CAAAH,QAAA,CAAC,QAAM,CAAQ,CAAC,EACnC,CAAC,EACT,CAAC,CAEX,CAAC,CAED,cAAe,CAAAnD,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}