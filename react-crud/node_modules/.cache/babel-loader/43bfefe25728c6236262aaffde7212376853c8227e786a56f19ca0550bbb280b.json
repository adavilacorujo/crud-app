{"ast":null,"code":"import _objectSpread from\"/Users/adavila/Documents/work/occam/dev/postgres_python/react-crud/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/adavila/Documents/work/occam/dev/postgres_python/react-crud/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{MouseEventHandler,useEffect,useState}from\"react\";import Home from\"./pages/home/Home\";import{Routes,Route}from\"react-router-dom\";import Note from\"./components/Note\";import axios from\"axios\";import noteService from'./services/notes';import Notification from\"./components/Notification\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useState3=useState('a new note...'),_useState4=_slicedToArray(_useState3,2),newNote=_useState4[0],setNewNotes=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showAll=_useState6[0],setShowAll=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){noteService.getAll().then(function(initialNotes){setNotes(initialNotes);});axios.get('/db.json').then(function(response){console.log(\"Resposne from server\",response);});},[]);var toggleImportanceOf=function toggleImportanceOf(id){var url=\"http://localhost:3001/notes/\".concat(id);var note=notes.find(function(n){return n.id===id;});var changedNote=_objectSpread(_objectSpread({},note),{},{important:!note.important});noteService.update(id,changedNote).then(function(updatedNote){setNotes(notes.map(function(n){return n.id!==id?n:updatedNote;}));}).catch(function(error){setErrorMessage(\"Note \".concat(note.content,\" was already removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);});setNotes(notes.filter(function(n){return n.id!==id;}));console.log('importance of ',id,' needs to be toggled');};var addNote=function addNote(event){event.preventDefault();var noteObject={content:newNote,important:Math.random()<0.5,id:notes.length+1};noteService.create(noteObject).then(function(response){setNotes(notes.concat(response));setNewNotes('');});};var handleNoteChange=function handleNoteChange(event){setNewNotes(event.target.value);};var notesToShow=showAll?notes:notes.filter(function(note){return note.important;});if(!notes)return null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Notes\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setShowAll(!showAll);},children:[\"show \",showAll?'important':'all']})}),/*#__PURE__*/_jsx(\"ul\",{children:notesToShow.map(function(note){return/*#__PURE__*/_jsx(Note,{note:note,toggleImportance:function toggleImportance(){return toggleImportanceOf(note.id);}},note.id);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addNote,children:[/*#__PURE__*/_jsx(\"input\",{value:newNote,onChange:handleNoteChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"save\"})]})]});};export default App;","map":{"version":3,"names":["MouseEventHandler","useEffect","useState","Home","Routes","Route","Note","axios","noteService","Notification","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","notes","setNotes","_useState3","_useState4","newNote","setNewNotes","_useState5","_useState6","showAll","setShowAll","_useState7","_useState8","errorMessage","setErrorMessage","getAll","then","initialNotes","get","response","console","log","toggleImportanceOf","id","url","concat","note","find","n","changedNote","_objectSpread","important","update","updatedNote","map","catch","error","content","setTimeout","filter","addNote","event","preventDefault","noteObject","Math","random","length","create","handleNoteChange","target","value","notesToShow","children","message","onClick","toggleImportance","onSubmit","onChange","type"],"sources":["/Users/adavila/Documents/work/occam/dev/postgres_python/react-crud/src/App.jsx"],"sourcesContent":["import { MouseEventHandler, useEffect, useState } from \"react\";\nimport Home from \"./pages/home/Home\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Note from \"./components/Note\";\nimport axios from \"axios\";\nimport noteService from './services/notes'\nimport Notification from \"./components/Notification\";\n\n\nconst App = () => {\n    const [notes, setNotes] = useState(null)\n    const [newNote, setNewNotes] = useState('a new note...')\n    const [showAll, setShowAll] = useState(true);\n    const [errorMessage, setErrorMessage] = useState(null)\n\n    useEffect(() => {\n      noteService\n        .getAll()\n        .then(initialNotes => {\n          setNotes(initialNotes)\n        })\n\n        axios\n          .get('/db.json')\n          .then(response => {\n            console.log(\"Resposne from server\", response);\n          })\n        \n    }, [])\n\n\n    const toggleImportanceOf = (id) => {\n      const url = `http://localhost:3001/notes/${id}`\n      const note = notes.find(n => n.id === id)\n      const changedNote = { ...note, important: !note.important }\n\n      noteService\n        .update(id, changedNote)\n        .then(updatedNote => {\n          setNotes(notes.map(n => n.id !== id ? n : updatedNote))\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Note ${note.content} was already removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n        setNotes(notes.filter(n => n.id !== id))\n\n      console.log('importance of ', id, ' needs to be toggled')\n    }\n\n  \n    const addNote = (event) => {    \n        event.preventDefault()   \n        const noteObject = {\n          content: newNote,\n          important: Math.random() < 0.5,\n          id: notes.length + 1\n        }\n\n        noteService\n        .create(noteObject)\n        .then(response => {\n          setNotes(notes.concat(response))\n          setNewNotes('')\n        })\n    }\n\n    const handleNoteChange = (event) => {\n      setNewNotes(event.target.value)\n    }\n\n    const notesToShow = showAll ? notes : notes.filter(note => note.important)\n\n\n    if (!notes) return null;\n\n    return (\n      <div>\n        <h1>Notes</h1>\n        <Notification message={errorMessage} />\n        <div>\n          <button onClick={() => setShowAll(!showAll)}>\n            show {showAll ? 'important' : 'all'}\n          </button>\n        </div>\n        <ul>\n          {notesToShow.map(note => \n            <Note \n              key={note.id} \n              note={note} \n              toggleImportance={() => toggleImportanceOf(note.id)}\n            />\n          )}\n        </ul>\n        <form onSubmit={addNote}>        \n        <input \n            value={newNote}\n            onChange={handleNoteChange}\n        />\n        <button type=\"submit\">save</button>      \n        </form>       \n    </div>\n    )\n  }\n\nexport default App;\n"],"mappings":"+SAAA,OAASA,iBAAiB,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,OAASC,MAAM,CAAEC,KAAK,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,kBAAkB,CAC1C,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGrD,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAA,CAAS,CACd,IAAAC,SAAA,CAA0Bb,QAAQ,CAAC,IAAI,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA+BlB,QAAQ,CAAC,eAAe,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjDE,OAAO,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC3B,IAAAG,UAAA,CAA8BtB,QAAQ,CAAC,IAAI,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAAwC1B,QAAQ,CAAC,IAAI,CAAC,CAAA2B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA/CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC5B,SAAS,CAAC,UAAM,CACdO,WAAW,CACRwB,MAAM,CAAC,CAAC,CACRC,IAAI,CAAC,SAAAC,YAAY,CAAI,CACpBf,QAAQ,CAACe,YAAY,CAAC,CACxB,CAAC,CAAC,CAEF3B,KAAK,CACF4B,GAAG,CAAC,UAAU,CAAC,CACfF,IAAI,CAAC,SAAAG,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEF,QAAQ,CAAC,CAC/C,CAAC,CAAC,CAER,CAAC,CAAE,EAAE,CAAC,CAGN,GAAM,CAAAG,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAIC,EAAE,CAAK,CACjC,GAAM,CAAAC,GAAG,gCAAAC,MAAA,CAAkCF,EAAE,CAAE,CAC/C,GAAM,CAAAG,IAAI,CAAGzB,KAAK,CAAC0B,IAAI,CAAC,SAAAC,CAAC,QAAI,CAAAA,CAAC,CAACL,EAAE,GAAKA,EAAE,GAAC,CACzC,GAAM,CAAAM,WAAW,CAAAC,aAAA,CAAAA,aAAA,IAAQJ,IAAI,MAAEK,SAAS,CAAE,CAACL,IAAI,CAACK,SAAS,EAAE,CAE3DxC,WAAW,CACRyC,MAAM,CAACT,EAAE,CAAEM,WAAW,CAAC,CACvBb,IAAI,CAAC,SAAAiB,WAAW,CAAI,CACnB/B,QAAQ,CAACD,KAAK,CAACiC,GAAG,CAAC,SAAAN,CAAC,QAAI,CAAAA,CAAC,CAACL,EAAE,GAAKA,EAAE,CAAGK,CAAC,CAAGK,WAAW,GAAC,CAAC,CACzD,CAAC,CAAC,CACDE,KAAK,CAAC,SAAAC,KAAK,CAAI,CACdtB,eAAe,SAAAW,MAAA,CACLC,IAAI,CAACW,OAAO,oCACtB,CAAC,CACDC,UAAU,CAAC,UAAM,CACfxB,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAC,CACFZ,QAAQ,CAACD,KAAK,CAACsC,MAAM,CAAC,SAAAX,CAAC,QAAI,CAAAA,CAAC,CAACL,EAAE,GAAKA,EAAE,GAAC,CAAC,CAE1CH,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEE,EAAE,CAAE,sBAAsB,CAAC,CAC3D,CAAC,CAGD,GAAM,CAAAiB,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIC,KAAK,CAAK,CACvBA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAM,CAAAC,UAAU,CAAG,CACjBN,OAAO,CAAEhC,OAAO,CAChB0B,SAAS,CAAEa,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAC9BtB,EAAE,CAAEtB,KAAK,CAAC6C,MAAM,CAAG,CACrB,CAAC,CAEDvD,WAAW,CACVwD,MAAM,CAACJ,UAAU,CAAC,CAClB3B,IAAI,CAAC,SAAAG,QAAQ,CAAI,CAChBjB,QAAQ,CAACD,KAAK,CAACwB,MAAM,CAACN,QAAQ,CAAC,CAAC,CAChCb,WAAW,CAAC,EAAE,CAAC,CACjB,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAA0C,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIP,KAAK,CAAK,CAClCnC,WAAW,CAACmC,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,CACjC,CAAC,CAED,GAAM,CAAAC,WAAW,CAAG1C,OAAO,CAAGR,KAAK,CAAGA,KAAK,CAACsC,MAAM,CAAC,SAAAb,IAAI,QAAI,CAAAA,IAAI,CAACK,SAAS,GAAC,CAG1E,GAAI,CAAC9B,KAAK,CAAE,MAAO,KAAI,CAEvB,mBACEL,KAAA,QAAAwD,QAAA,eACE1D,IAAA,OAAA0D,QAAA,CAAI,OAAK,CAAI,CAAC,cACd1D,IAAA,CAACF,YAAY,EAAC6D,OAAO,CAAExC,YAAa,CAAE,CAAC,cACvCnB,IAAA,QAAA0D,QAAA,cACExD,KAAA,WAAQ0D,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA5C,UAAU,CAAC,CAACD,OAAO,CAAC,EAAC,CAAA2C,QAAA,EAAC,OACtC,CAAC3C,OAAO,CAAG,WAAW,CAAG,KAAK,EAC7B,CAAC,CACN,CAAC,cACNf,IAAA,OAAA0D,QAAA,CACGD,WAAW,CAACjB,GAAG,CAAC,SAAAR,IAAI,qBACnBhC,IAAA,CAACL,IAAI,EAEHqC,IAAI,CAAEA,IAAK,CACX6B,gBAAgB,CAAE,SAAAA,iBAAA,QAAM,CAAAjC,kBAAkB,CAACI,IAAI,CAACH,EAAE,CAAC,EAAC,EAF/CG,IAAI,CAACH,EAGX,CAAC,EACJ,CAAC,CACC,CAAC,cACL3B,KAAA,SAAM4D,QAAQ,CAAEhB,OAAQ,CAAAY,QAAA,eACxB1D,IAAA,UACIwD,KAAK,CAAE7C,OAAQ,CACfoD,QAAQ,CAAET,gBAAiB,CAC9B,CAAC,cACFtD,IAAA,WAAQgE,IAAI,CAAC,QAAQ,CAAAN,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC7B,CAAC,EACN,CAAC,CAER,CAAC,CAEH,cAAe,CAAAvD,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}